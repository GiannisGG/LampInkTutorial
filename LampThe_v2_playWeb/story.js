var storyContent = ï»¿{"inkVersion":20,"root":[["\n","\n","thread",{"->":"intro"},"ev",{"VAR?":"currentRoomAddress"},"/ev","thread",{"->":"beIn"},["done",{"#f":5,"#n":"g-0"}],null],"done",{"raiseState":[{"temp=":"newState"},{"temp=":"stateMachine"},"ev",{"VAR?":"stateMachine"},{"VAR?":"newState"},"<","/ev",[{"->":".^.b","c":true},{"b":["\n","ev",{"VAR?":"newState"},"/ev",{"temp=":"stateMachine","re":true},{"->":".^.^.^.8"},null]}],"nop","\n",{"#f":1}],"exitTo":[{"temp=":"targetRoom"},"ev",{"VAR?":"currentRoom"},"/ev",{"VAR=":"previousRoom","re":true},"ev",{"VAR?":"currentRoomAddress"},"/ev",{"VAR=":"previousRoomAddress","re":true},"ev",{"VAR?":"targetRoom"},"/ev",{"->":"beIn"},{"#f":1}],"beIn":[{"temp=":"targetRoom"},"thread",{"->":"targetRoom","var":true},"thread",{"->":"GeographyOptions"},"thread",{"->":"inventoryOptions"},"done",{"#f":1}],"inventoryOptions":[["ev","str","^Take inventory.","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":[{"->t->":"takeInventory"},"ev",{"VAR?":"currentRoomAddress"},"/ev",{"->":"beIn"},"\n",{"#f":5}]}],{"#f":1}],"takeInventory":[{"->":".^.checkItems"},{"checkItems":[["^You are carrying: ","ev",{"VAR?":"inventory"},"out","/ev","^.","\n","ev","str","^Wet your bread.","/str",{"VAR?":"inventory"},{"VAR?":"bread"},"?",{"VAR?":"breadState"},{"VAR?":"dry"},"==","&&",{"VAR?":"currentRoom"},{"VAR?":"fountain"},"==","&&","/ev",{"*":".^.c-0","flg":21},"ev","str","^Eat the bread.","/str",{"VAR?":"inventory"},{"VAR?":"bread"},"?","/ev",{"*":".^.c-1","flg":5},"ev","str","^Rub the lamp.","/str",{"VAR?":"inventory"},{"VAR?":"lamp"},"?",{"VAR?":"lampEvents"},{"VAR?":"metDjinn"},"<","&&","/ev",{"*":".^.c-2","flg":5},"ev","str","ev",{"VAR?":"currentRoom"},{"VAR?":"fountain"},"==","/ev",[{"->":".^.b","c":true},{"b":["^Toss the coin and make a wish",{"->":".^.^.^.55"},null]}],[{"->":".^.b"},{"b":["^Admire the tin coin",{"->":".^.^.^.55"},null]}],"nop","^.","/str",{"VAR?":"inventory"},{"VAR?":"coin"},"?","/ev",{"*":".^.c-3","flg":5},"ev","str","^Return to your quest.","/str","/ev",{"*":".^.c-4","flg":4},{"c-0":["^You wet the bread in the fountain. It's now much softer and edible.","\n","ev",{"VAR?":"wet"},"/ev",{"VAR=":"breadState","re":true},{"->":".^.^.^"},{"->":".^.^.g-0"},{"#f":5}],"c-1":["\n","ev",{"VAR?":"breadState"},{"VAR?":"wet"},"==","/ev",[{"->":".^.b","c":true},{"b":["\n","^You wolf down the wet, softened bread. Nourishing.","\n","ev",{"VAR?":"inventory"},{"VAR?":"bread"},"-",{"VAR=":"inventory","re":true},"/ev",{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["\n","^You ",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop",{"->":".^.^.17"},null],"s1":["pop","^could ",{"->":".^.^.17"},null],"#f":5}],"^attempt taking a bite off the bread, but it's too dry. You ",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^almost broke a tooth",{"->":".^.^.17"},null],"s1":["pop","^don't want to risk breaking your teeth",{"->":".^.^.17"},null],"#f":5}],"^.","\n",{"->":".^.^.^.8"},null]}],"nop","\n",{"->":".^.^.^"},{"->":".^.^.g-0"},{"#f":5}],"c-2":["\n","ev",{"VAR?":"currentRoom"},{"VAR?":"vault"},"==","/ev",[{"->":".^.b","c":true},{"b":["^ Not in here.",{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":[{"->":"ending"},{"->":".^.^.^.8"},null]}],"nop","\n",{"->":".^.^.g-0"},{"#f":5}],"c-3":["\n","ev",{"VAR?":"currentRoom"},{"VAR?":"fountain"},"==","/ev",[{"->":".^.b","c":true},{"b":["\n","^You toss the coin into the fountain, wishing for this nightmare to end and for you to be free again...","\n","^No. No miracle happened. You're still here.","\n","ev",{"VAR?":"inventory"},{"VAR?":"coin"},"-",{"VAR=":"inventory","re":true},"/ev",{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["\n","^You take the coin out of your pocket and give it an affectionate rub. Ah... Look at that worthless little thing...","\n",{"->":".^.^.^.8"},null]}],"nop","\n",{"->":".^.^.^"},{"->":".^.^.g-0"},{"#f":5}],"c-4":["\n",{"->":".^.^.g-0"},{"#f":5}],"g-0":["ev","void","/ev","->->",{"#f":5}]}],{"#f":1}],"#f":1}],"GeographyOptions":[["ev","str","^Try the secret door.","/str",{"VAR?":"currentRoom"},{"VAR?":"treasury"},"==",{"CNT?":"visitTreasury.examineTreasure"},"&&",{"CNT?":"visitVault"},"!","&&","/ev",{"*":".^.c-0","flg":5},"ev","str","^Enter the ","ev",{"CNT?":"visitFountain"},"/ev",[{"->":".^.b","c":true},{"b":["^fountain room",{"->":".^.^.^.22"},null]}],[{"->":".^.b"},{"b":["^room with the sound of water",{"->":".^.^.^.22"},null]}],"nop","^.","/str",{"VAR?":"currentRoom"},{"VAR?":"hall"},"==",{"VAR?":"previousRoom"},{"VAR?":"fountain"},"!=","&&","/ev",{"*":".^.c-1","flg":5},"ev","str","^Enter the ","ev",{"CNT?":"visitJunkRoom"},"/ev",[{"->":".^.b","c":true},{"b":["^junk room",{"->":".^.^.^.42"},null]}],[{"->":".^.b"},{"b":["^silent room",{"->":".^.^.^.42"},null]}],"nop","^.","/str",{"VAR?":"currentRoom"},{"VAR?":"hall"},"==",{"VAR?":"previousRoom"},{"VAR?":"junk"},"!=","&&","/ev",{"*":".^.c-2","flg":5},"ev","str","^Enter the treasury.","/str",{"VAR?":"currentRoom"},{"VAR?":"hall"},"==",{"VAR?":"previousRoom"},{"VAR?":"treasury"},"!=","&&","/ev",{"*":".^.c-3","flg":5},"ev","str","^Return to the ","ev",{"VAR?":"previousRoom"},"out","/ev","ev",{"VAR?":"previousRoom"},{"VAR?":"junk"},"==",{"VAR?":"previousRoom"},{"VAR?":"fountain"},"==","||","/ev",[{"->":".^.b","c":true},{"b":["^ room",{"->":".^.^.^.84"},null]}],"nop","^.","/str",{"VAR?":"currentRoom"},{"VAR?":"previousRoom"},"!=","/ev",{"*":".^.c-4","flg":5},"ev","str","^Exit the treasury.","/str",{"VAR?":"currentRoom"},{"VAR?":"treasury"},"==",{"CNT?":"visitHall"},"!","&&","/ev",{"*":".^.c-5","flg":5},{"c-0":["^You open the secret door and squeeze in. ","ev",{"^->":"visitVault"},"/ev",{"->":"exitTo"},"\n",{"#f":5}],"c-1":["ev",{"^->":"visitFountain"},"/ev",{"->":"exitTo"},"\n",{"#f":5}],"c-2":["ev",{"^->":"visitJunkRoom"},"/ev",{"->":"exitTo"},"\n",{"#f":5}],"c-3":["ev",{"^->":"visitTreasury"},"/ev",{"->":"exitTo"},"\n",{"#f":5}],"c-4":[{"->":"returnToPreviousRoom"},"\n",{"#f":5}],"c-5":["^You pat the dust off your clothes and clumsily find your way out of the treasury.","\n","ev",{"^->":"visitHall"},"/ev",{"->":"exitTo"},{"#f":5}]}],{"#f":1}],"returnToPreviousRoom":["^You return to the ","ev",{"VAR?":"previousRoom"},"out","/ev","ev",{"VAR?":"previousRoom"},{"VAR?":"junk"},"==",{"VAR?":"previousRoom"},{"VAR?":"fountain"},"==","||","/ev",[{"->":".^.b","c":true},{"b":["^ room",{"->":".^.^.^.15"},null]}],"nop","^.","\n","<>","^ ","ev",{"VAR?":"previousRoomAddress"},"/ev",{"->":"exitTo"},"\n",{"#f":1}],"intro":["^After what feels like a century, you open your eyes. It takes a while for them to get used to the darkness. That was one hell of a fall.","\n","^You look around you. ","<>","\n","done",{"#f":1}],"visitTreasury":[["ev",{"VAR?":"treasury"},"/ev",{"VAR=":"currentRoom","re":true},"ev",{"^->":"visitTreasury"},"/ev",{"VAR=":"currentRoomAddress","re":true},["ev","visit",2,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"nop",{"s0":["pop","^This must be the cave's treasury, since it's filled with treasures beyond your wildest dreams. And from all these riches, the old fool wanted a plain oil lamp.",{"->":".^.^.23"},null],"s1":["pop",{"->":".^.^.23"},null],"s2":["pop",{"->":".^.^.23"},null],"#f":5}],"\n",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^An",{"->":".^.^.17"},null],"s1":["pop","^The main",{"->":".^.^.17"},null],"#f":5}],"^ opening leads to another room in the cave.","ev",{"VAR?":"inventory"},{"VAR?":"lamp"},"?","/ev",[{"->":".^.b","c":true},{"b":["^ ",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^Before all those shiny riches, you",{"->":".^.^.17"},null],"s1":["pop","^You",{"->":".^.^.17"},null],"#f":5}],"^ feel a strange urge to rub ",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^this dusty",{"->":".^.^.17"},null],"s1":["pop","^the",{"->":".^.^.17"},null],"#f":5}],"^ lamp clean.",{"->":".^.^.^.18"},null]}],"nop","\n","ev","str","^Examine the treasure.","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["^ ",{"->":".^.^.^.examineTreasure"},"\n",{"#f":5}]}],{"examineTreasure":["^You marvel at the ",["ev","visit",3,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"ev","du",3,"==","/ev",{"->":".^.s3","c":true},"nop",{"s0":["pop","^amounts of gold",{"->":".^.^.29"},null],"s1":["pop","^mountains of jewels",{"->":".^.^.29"},null],"s2":["pop","^rivers of silk",{"->":".^.^.29"},null],"s3":["pop","^endless riches. Who owns all this, you wonder",{"->":".^.^.29"},null],"#f":5}],"^.","\n",["ev",{"VAR?":"inventory"},{"VAR?":"lamp"},"?","/ev",{"->":".^.b","c":true},{"b":["\n","<>","^ The lamp twitches inside your pocket, as if it shares the sentiment.","\n",{"->":".^.^.^.7"},null]}],["ev",{"VAR?":"lampEvents"},{"VAR?":"seenLamp"},"==","/ev",{"->":".^.b","c":true},{"b":["\n","<>","^ How can that dirty bronze lamp be of more value than any item in this room?","\n",{"->":".^.^.^.7"},null]}],["ev",{"VAR?":"lampEvents"},{"VAR?":"lampNotFound"},"==","/ev",{"->":".^.b","c":true},{"b":["\n","<>","^ And in this mythical place, are you supposed to look for a stupid old lamp?","\n",{"->":".^.^.^.7"},null]}],"nop","\n","ev",{"CNT?":".^"},1,"==","/ev",[{"->":".^.b","c":true},{"b":["^Hey, what's this? Behind a small hill of gold coins, you find something that looks like a secret door.",{"->":".^.^.^.16"},null]}],[{"->":".^.b"},{"b":["^There is a secret door behind a pile of gold coins. ","<>",{"->":".^.^.^.16"},null]}],"nop","\n","ev",{"^->":"visitTreasury"},"/ev",{"->":"beIn"},{"#f":1}],"#f":3}],"visitHall":["ev",{"VAR?":"hall"},"/ev",{"VAR=":"currentRoom","re":true},"ev",{"^->":"visitHall"},"/ev",{"VAR=":"currentRoomAddress","re":true},"^You enter ",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^a",{"->":".^.^.17"},null],"s1":["pop","^the",{"->":".^.^.17"},null],"#f":5}],"^ small hall. Its openings lead to ","ev",{"CNT?":"visitJunkRoom"},"!",{"CNT?":"visitFountain"},"!","&&","/ev",[{"->":".^.b","c":true},{"b":["^two other rooms in the cave",{"->":".^.^.^.20"},null]}],[{"->":".^.b"},{"b":["ev",{"CNT?":"visitJunkRoom"},"/ev",[{"->":".^.b","c":true},{"b":["^the junk room",{"->":".^.^.^.5"},null]}],[{"->":".^.b"},{"b":["^one other room",{"->":".^.^.^.5"},null]}],"nop","^, ","ev",{"CNT?":"visitFountain"},"/ev",[{"->":".^.b","c":true},{"b":["^the fountain",{"->":".^.^.^.12"},null]}],[{"->":".^.b"},{"b":["^one other room where you can hear the sound of water",{"->":".^.^.^.12"},null]}],"nop",{"->":".^.^.^.20"},null]}],"nop","^, as well as back to the treasury.",["ev","visit",2,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"nop",{"s0":["pop","^ From one of the rooms, you can hear the gentle sound of water.",{"->":".^.^.23"},null],"s1":["pop",{"->":".^.^.23"},null],"s2":["pop",{"->":".^.^.23"},null],"#f":5}],"\n","done",{"#f":3}],"visitJunkRoom":[["ev",{"VAR?":"junk"},"/ev",{"VAR=":"currentRoom","re":true},"ev",{"^->":"visitJunkRoom"},"/ev",{"VAR=":"currentRoomAddress","re":true},["ev","visit",2,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"nop",{"s0":["pop","^This room is full of junk. ",{"->":".^.^.23"},null],"s1":["pop",{"->":".^.^.23"},null],"s2":["pop",{"->":".^.^.23"},null],"#f":5}],"^Piles of rags. Broken crates. Mouldy cheese.","\n","ev","str","^Search the junk.","/str",{"VAR?":"inventory"},{"VAR?":"coin"},"!?","/ev",{"*":".^.c-0","flg":5},{"c-0":["^You have all the time in the world, so why not invest some in searching through the junk?","\n","^After what seemed like days, you find a worthless coin made of tin. For some reason, you decide to take it. (It IS useless, though, be warned.)","\n","ev",{"VAR?":"inventory"},{"VAR?":"coin"},"+",{"VAR=":"inventory","re":true},"/ev","ev",{"VAR?":"currentRoomAddress"},"/ev",{"->":"beIn"},{"->":".^.^.g-0"},{"#f":5}],"g-0":["done",{"#f":5}]}],{"#f":3}],"visitFountain":["ev",{"VAR?":"fountain"},"/ev",{"VAR=":"currentRoom","re":true},"ev",{"^->":"visitFountain"},"/ev",{"VAR=":"currentRoomAddress","re":true},"^A small fountain is here. ",{"->":".^.choices"},"\n",{"choices":[["ev","str","^Drink some water.","/str","/ev",{"*":".^.c-0","flg":20},{"c-0":["^You gulp down huge quantities of water. Refreshing.","\n","ev",{"VAR?":"currentRoomAddress"},"/ev",{"->":"beIn"},{"#f":5}]}],{"#f":1}],"#f":3}],"visitVault":[["ev",{"VAR?":"vault"},"/ev",{"VAR=":"currentRoom","re":true},"ev",{"^->":"visitVault"},"/ev",{"VAR=":"currentRoomAddress","re":true},"ev",{"^var":"lampEvents","ci":-1},{"VAR?":"seenLamp"},{"f()":"raiseState"},"pop","/ev","\n","ev",{"CNT?":".^.^"},1,"==","/ev",[{"->":".^.b","c":true},{"b":["^It's not actually a room, but a tiny vault",{"->":".^.^.^.22"},null]}],[{"->":".^.b"},{"b":["ev",{"VAR?":"inventory"},{"VAR?":"lamp"},"?","/ev",[{"->":".^.b","c":true},{"b":["^The vault looks much emptier without ",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^it",{"->":".^.^.17"},null],"s1":["pop","^the lamp",{"->":".^.^.17"},null],"#f":5}],{"->":".^.^.^.7"},null]}],[{"->":".^.b"},{"b":["^Wow, this vault is tiny",{"->":".^.^.^.7"},null]}],"nop",{"->":".^.^.^.22"},null]}],"nop","^. In a corner rests a pile of ancient scrolls. Boring.","\n","ev",{"VAR?":"inventory"},{"VAR?":"lamp"},"!?","/ev",[{"->":".^.b","c":true},{"b":["^You also see a dusty oil lamp, here. ",{"->":".^.^.^.31"},null]}],"nop","\n",["ev","str","^Read the scrolls.","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Take the lamp.","/str",{"VAR?":"inventory"},{"VAR?":"lamp"},"!?","/ev",{"*":".^.c-1","flg":21},{"c-0":["^I said: bo-ring! ","ev",{"^->":"visitVault.0.whatDo"},"/ev",{"->":"beIn"},"\n",{"#f":5}],"c-1":["^ It's old and dusty. ",{"->":".^.^.^.^.takeLamp"},"\n",{"#f":5}],"#f":7,"#n":"whatDo"}],null],{"takeLamp":[["^You pick up the lamp, but scream, startled, dropping it again.","\n","^It moved! The thing moved!","\n","ev","str","^Examine the lamp.","/str","/ev",{"*":".^.c-0","flg":20},"ev","str","^Stay completely still.","/str","/ev",{"*":".^.c-1","flg":20},{"c-0":["^You take a closer look at the lamp, as it lays on the vault's sandy floor.","\n",{"->":".^.^.g-0"},{"#f":5}],"c-1":["^You hold your breath and stay still.","\n",["ev","str","^Approach the thing.","/str","/ev",{"*":".^.c-0","flg":20},{"c-0":[{"->":".^.^.^.^.c-0"},"\n",{"->":".^.^.^.^.g-0"},{"#f":5}]}],{"#f":5}],"g-0":["^Nothing. The thing looks as inanimate as a lamp is supposed to be. Still, just seconds ago, you felt it twitch between your fingers!","\n","ev","str","^Look inside it.","/str",{"CNT?":".^.^.c-0"},"/ev",{"*":".^.c-2","flg":21},"ev","str","^Poke it with something.","/str","/ev",{"*":".^.c-3","flg":20},["ev",{"^->":"visitVault.takeLamp.0.g-0.15.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":".^.^.c-4","flg":18},{"s":["^\"He-hello?\"",{"->":"$r","var":true},null]}],{"c-2":["^You approach your face to the lamp,","\n",{"->":".^.^.^.g-1"},{"#f":5}],"c-3":["^You look around the treasury for something long enough to use as a poker and close enough to reach without taking your eyes off the lamp. You grab...","\n",[["ev",{"^->":"visitVault.takeLamp.0.g-0.c-3.2.0.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^.","/str","/ev",{"*":".^.^.c-0","flg":22},{"s":["^... a silver sceptre",{"->":"$r","var":true},null]}],["ev",{"^->":"visitVault.takeLamp.0.g-0.c-3.2.1.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^.","/str","/ev",{"*":".^.^.c-1","flg":22},{"s":["^... a golden statue of a cat",{"->":"$r","var":true},null]}],["ev",{"^->":"visitVault.takeLamp.0.g-0.c-3.2.2.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^.","/str","/ev",{"*":".^.^.c-2","flg":22},{"s":["^... a platinum ceremonial mace",{"->":"$r","var":true},null]}],{"c-0":["ev",{"^->":"visitVault.takeLamp.0.g-0.c-3.2.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.0.s"},[{"#n":"$r2"}],"\n","ev","str","^the sceptre","/str","/ev",{"VAR=":"pokerItem","re":true},{"->":".^.^.g-0"},{"#f":5}],"c-1":["ev",{"^->":"visitVault.takeLamp.0.g-0.c-3.2.c-1.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.1.s"},[{"#n":"$r2"}],"\n","ev","str","^the cat statue","/str","/ev",{"VAR=":"pokerItem","re":true},{"->":".^.^.g-0"},{"#f":5}],"c-2":["ev",{"^->":"visitVault.takeLamp.0.g-0.c-3.2.c-2.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.2.s"},[{"#n":"$r2"}],"\n","ev","str","^the platinum mace","/str","/ev",{"VAR=":"pokerItem","re":true},{"->":".^.^.g-0"},{"#f":5}],"g-0":["<>","^ and cautiously poke the lamp with it. You only remember squeezing ","ev",{"VAR?":"pokerItem"},"out","/ev","^ tight","\n",{"->":".^.^.^.^.^.g-1"},{"#f":5}]}],{"#f":5}],"c-4":["ev",{"^->":"visitVault.takeLamp.0.g-0.c-4.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.15.s"},[{"#n":"$r2"}],"^ you whisper...","\n",{"->":".^.^.^.g-1"},{"#f":5}],"#f":5}],"g-1":["<>","^ before letting out a wail of horror.","\n","^The lamp has just twitched again!","\n","ev","str","^Hit the thing!","/str","/ev",{"*":".^.c-5","flg":20},"ev","str","^Oh, just take it already.","/str","/ev",{"*":".^.c-6","flg":20},{"c-5":["^You approach the lamp with cruel intentions.","\n",["ev","str","^Kick it.","/str","/ev",{"*":".^.c-0","flg":20},"ev","str","^Head-butt it.","/str","/ev",{"*":".^.c-1","flg":20},"ev","str","^Stamp on it.","/str","/ev",{"*":".^.c-2","flg":20},"ev","str","^Throw it against a wall.","/str","/ev",{"*":".^.c-3","flg":20},"ev","str","^Whack it with ","ev",{"VAR?":"pokerItem"},"out","/ev","^.","/str","/ev",{"*":".^.c-4","flg":20},{"c-0":["\n",{"->":".^.^.g-0"},{"#f":5}],"c-1":["\n",{"->":".^.^.g-0"},{"#f":5}],"c-2":["\n",{"->":".^.^.g-0"},{"#f":5}],"c-3":["\n",{"->":".^.^.g-0"},{"#f":5}],"c-4":["\n",{"->":".^.^.g-0"},{"#f":5}],"g-0":["^You unleash your anger on the inanimate thing, not helping feeling a little silly in the process. The lamp doesn't fight back, but you think you hear distant laughter; as if from another dimension.","\n","ev","str","^Oh, just take the thing.","/str","/ev",{"*":".^.c-5","flg":20},{"c-5":[{"->":".^.^.^.^.^.c-6"},"\n",{"#f":5}],"#f":5}]}],{"#f":5}],"c-6":["^Okay, enough monkeying around. Inanimate or not, you decide not to let your fear rule your actions. You take the lamp and put it in your pockets.","\n","ev",{"VAR?":"inventory"},{"VAR?":"lamp"},"+",{"VAR=":"inventory","re":true},"/ev","ev",{"^->":"visitVault"},"/ev",{"->":"beIn"},{"#f":5}],"#f":5}]}],{"#f":1}],"#f":3}],"ending":[["ev",{"^var":"lampEvents","ci":-1},{"VAR?":"metDjinn"},{"f()":"raiseState"},"pop","/ev","\n","^You give the lamp a good rub with your sleeve and it starts twitching again. But you are used to it, by now, so you tightly hold onto it.","\n","^A puff of smokes comes out its mouth andâALAKAZAM!âa Djinn appears. \"There's the rub!\" it says. \"After three thousand years, I started losing hope.\" Then, after taking a better look at you: \"So, did you review my job application?\"","\n",["ev",{"^->":"ending.0.11.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":".^.^.c-0","flg":18},{"s":["^\"The job what?\"",{"->":"$r","var":true},null]}],["ev",{"^->":"ending.0.12.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":".^.^.c-1","flg":18},{"s":["^\"The what application?\"",{"->":"$r","var":true},null]}],["ev",{"^->":"ending.0.13.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":".^.^.c-2","flg":18},{"s":["^\"What job application?\"",{"->":"$r","var":true},null]}],{"c-0":["ev",{"^->":"ending.0.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.11.s"},[{"#n":"$r2"}],"\n",{"->":".^.^.g-0"},{"#f":5}],"c-1":["ev",{"^->":"ending.0.c-1.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.12.s"},[{"#n":"$r2"}],"\n",{"->":".^.^.g-0"},{"#f":5}],"c-2":["ev",{"^->":"ending.0.c-2.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.13.s"},[{"#n":"$r2"}],"\n",{"->":".^.^.g-0"},{"#f":5}],"g-0":["<>","^ you whisper, horrified.","\n","^The Djinn rolls its eyes with a sigh. \"How can I help?\" it asks.","\n",["ev",{"^->":"ending.0.g-0.5.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":".^.^.c-3","flg":18},{"s":["^\"Get me out of here!\"",{"->":"$r","var":true},null]}],["ev",{"^->":"ending.0.g-0.6.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^.\"","/str","/ev",{"*":".^.^.c-4","flg":22},{"s":["^\"This game sucks",{"->":"$r","var":true},null]}],{"c-3":["ev",{"^->":"ending.0.g-0.c-3.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.5.s"},[{"#n":"$r2"}],"ev",{"CNT?":".^.^.c-4"},"!","/ev",[{"->":".^.b","c":true},{"b":["^ you scream in anguish.",{"->":".^.^.^.11"},null]}],"nop","\n",{"->":".^.^.^.g-1"},{"#f":5}],"c-4":["ev",{"^->":"ending.0.g-0.c-4.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.6.s"},[{"#n":"$r2"}],"^,\" you scream in anguish. ",{"->":".^.^.c-3"},"\n",{"->":".^.^.^.g-1"},{"#f":5}],"#f":5}],"g-1":["^\"Your wish is my command,\" says the Djinn.","\n","end",{"#f":5}]}],{"#f":1}],"global decl":["ev","str","^the palm of your hand","/str",{"VAR=":"pokerItem"},{"list":{"lampEvents.lampNotFound":1}},{"VAR=":"lampEvents"},{"list":{"breadState.dry":1}},{"VAR=":"breadState"},{"list":{},"origins":["rooms"]},{"VAR=":"rooms"},{"VAR?":"treasury"},{"VAR=":"currentRoom"},{"VAR?":"treasury"},{"VAR=":"previousRoom"},{"list":{"inventory.bread":4,"inventory.knife":5}},{"VAR=":"inventory"},{"^->":"visitTreasury"},{"VAR=":"currentRoomAddress"},{"^->":"visitTreasury"},{"VAR=":"previousRoomAddress"},"/ev","end",null],"#f":1}],"listDefs":{"lampEvents":{"lampNotFound":1,"seenLamp":2,"metDjinn":3,"firstWish":4,"secondWish":5,"thirdWish":6},"breadState":{"dry":1,"wet":2},"rooms":{"treasury":1,"junk":2,"fountain":3,"hall":4,"vault":5},"inventory":{"lamp":1,"gem":2,"coin":3,"bread":4,"knife":5}}};